CXX        = g++
LD         = $(CXX)
#OPT        =
SRCDIR     = ../src
APPROVALSDIR = ../lib
OPT        = -g -DNDEBUG -I $(SRCDIR) -I $(APPROVALSDIR)

GTESTPATH = /usr
GINCS = -I $(GTESTPATH)/include
#GLIBS = -L $(GTESTPATH)/lib64 -lgtest -lgmock -lpthread
GLIBS = -L $(GTESTPATH)/lib64 -lgtest -lgmock

CXXFLAGS   = $(OPT) $(GINCS)
LDFLAGS    =

SOURCES    = $(SRCDIR)/Order.cpp $(SRCDIR)/Price.cpp $(SRCDIR)/Product.cpp	\
	$(SRCDIR)/Store.cpp $(SRCDIR)/StoreEvent.cpp $(SRCDIR)/XMLExporter.cpp
TESTSRC    = XMLExporterTest.cpp unittest_main.cpp

OBJECTS    = $(SOURCES:.cpp=.o) $(TESTSRC:.cpp=.o)
#EXECUTABLE = $(basename $(TESTSRC) )
EXECUTABLE = unittest

test : $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
	$(LD) $(LDFLAGS) -o $@ $^ $(GLIBS)
	./$@

clean : 
	rm -f *.exe *.o
	rm -f $(SRCDIR)/*.exe $(SRCDIR)/*.o

